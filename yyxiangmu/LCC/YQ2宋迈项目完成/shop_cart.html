<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<!--content属性值:
    	initial-scale:当页面首次展示，可视区域的缩放级别。取值1.0则页面按照实际尺寸显示，无任何缩放
    	maximum-scale=1.0,minimum-scale=1.0;可视区域的缩放级别。
    	maximun-scale=1.0:指用户可将页面放大的属性，1.0是指禁止用户放大到实际尺寸以上
    	user-scalable:是否可以对页面进行缩放，no是指禁止缩放
        -->
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="css/bootstrap.css" />
		<link rel="stylesheet" href="css/address_common.css" />
		<link rel="stylesheet"href="css/shop_cart.css" />
		<title>购物车</title>
		<script src="js/jquery-1.11.0.js"></script>
		<script src="js/bootstrap.js"></script>
		<style>
   	  				
   	  			</style>
	</head>
	<body>
		<nav class="navbar navbar-default" role="navigation">
    <div class="container">
    	<div class="car col-lg-12 col-md-12 ">
			<div class="dropdown  car_right">
				<button type="button" class="btn dropdown-toggle user" id="dropdownMenu1"  data-toggle="dropdown">
					CCC
					<span><img src="img/address.png"/></span>
				</button>
					<ul class="dropdown-menu xiala" role="menu" aria-labelledby="dropdownMenu1">
						<li role="presentation"><a role="menuitem" tabindex="-1" href="user.html">会员中心</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="order.html">我的订单</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="order_details.html">订单详情</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="address.html">收货地址</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="shop_cart.html">购物车</a></li>
						
					</ul>
					<span><a href="shop_cart.html"><img src="img/cart.png"></a><a href="shop_cart.html">购物车</a><i>( 0 )</i> </span>
			</div>
    	</div>
    	<div class="container-fluid">
    <div class="navbar-header navbar-left">
    
      <a href="index.html"><img src="img/logo.png" class="img-responsive logo" title="欢迎来到宋迈品牌商城！" alt="亲，请您刷新在试试！" /></a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-left">
      	<li><a href="index.html">首页</a></li>
      	<li><a href="brand_introduction.html">品牌介绍</a></li>
      	<li><a href="product.html">产品中心</a></li>
      	<li><a href="news.html">新闻中心</a></li>
      	<li><a href="contact_us.html">联系我们</a></li>
      </ul>
      
        <div class="form-group icon">
          <button type="submit"><img src="img/submit.png"/></button>
          <input type="text"  placeholder="">
        
        </div>
      
      
    </div>
  </div>
</nav>

<div class="concent">
   <div class="container center">
   	  <div class="col-lg-12 top col-md-12 col-sm-12 col-xs-12">
   	  	<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
   	  		<h1><a href="###">购物车</a></h1>
   	  	</div>
   	  	<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
   	  	<img src="img/shopcar.png"/>
   	  	</div>
   	  </div>
   	  
   	  	<div class="col-lg-12 shop_car  col-md-12 col-sm-12 col-xs-12">
   	  	<div class="col-lg-6 col-md-6 col-sm-6">
   	  	</div>
   	  	<div class="col-lg-6  col-md-6 col-sm-6 col-xs-12">
   	  	<p>购物车</p>
   	  	<p>确认订单</p>
   	  	<p>完成订单</p>
   	  	</div>
   	  	</div>
   	  	
   	  <div class="col-lg-12 shopcar col-md-12 col-sm-12">
   	  	
   	  	<table class="table-responsive">
   	  		<thead>
	   	  		<tr>
	   	  			<td width="8%"><i></i><input type="checkbox" class="all_check" id="isAutoLogin remember"></td>
	   	  			<td width="30%">商品信息</td>
	   	  			<td width="15%">单价</td>
	   	  			<td>数量</td>
	   	  			<td width="15%">小计</td>
	   	  			<td width="15%">操作</td>
	   	  		</tr>
   	  		</thead>
   	  		<tbody>
   	  			<tr>
   	  			<td><i></i><input type="checkbox" id="isAutoLogin remember"style="cursor: pointer;"></td>
   	  			<td><a href="pro_details.html"><img src="img/shopcar.jpg"/></a>
   	  				<p><a href="pro_details.html">2插口 1USB插孔插座</a> </p><p><span>白色</span>	</p></td>
   	  			<td>
   	  				<p>￥<s>598.00</s></p>
   	  				<p class="cont">￥<span>498.00</span></p>
   	  			    <p><span>特价</span></p>
   	  			</td>
   	  			<td>
   	  				<input class="prd_subNum" type="button" id="" value="-"/>
   	  				<input type="text" class="prd_num" value="1" />
   	  				<input class="prd_addNum" type="button" id="" value="+"/>
   	  			</td>
   	  			<td>￥<span>498.00</span></td>
   	  			<td><img src="img/shopcar2.png"/></td>
   	  		</tr>
   	  		<tr>
   	  			<td><i></i><input type="checkbox" id="isAutoLogin remember"style="cursor: pointer;"></td>
   	  			<td><a href="pro_details.html"><img src="img/shopcar.jpg"/></a><p><a href="pro_details.html">2插口 1USB插孔插座</a> </p><p><span>白色</span>	</p></td>
   	  			<td><p>￥<s>598.00</s></p>
   	  				<p class="cont">￥<span>498.00</span></p>
   	  			    <p><span>特价</span></p>
   	  				</td>
   	  			<td>
   	  				<input class="prd_subNum" type="button" id="" value="-"/>
   	  				<input type="text" class="prd_num" value="1" />
   	  				<input class="prd_addNum" type="button" id="" value="+"/>
   	  				
   	  			</td>
   	  			<td>￥<span>498.00</span></td>
   	  			<td><img src="img/shopcar2.png"/></td>
   	  			
   	  		</tr>
   	  		</tbody>
   	  		
   	  	</table>
   	  </div>
   	  <div class="col-lg-12 dibu col-md-12 col-sm-12">
   	  	<p>共<span id="num_total">1</span>件商品,邮费<span>￥0</span>，商品应付总额<span>￥<i>498.00</i></span></p>
   	  </div>
   	  <div class="col-lg-12 jiesuan col-md-12  col-sm-12">
   	  	<button><a href="confirm_order.html">立即结算</a></button>
   	  </div>

   </div>
</div>
<!--购物车的代码-->
	<script>
		$(function(){
			
			
			var num_total = function(){
				var input_leng=$(".table-responsive tbody tr input[type=checkbox]:checked").length;
		 
				$("#num_total").text(input_leng);
				
			}
			
			num_total();
			
			var cont = function(){
				var len1 = $(".table-responsive tbody tr input[type=checkbox]").length;
				var len2 = $(".table-responsive tbody tr input[type=checkbox]:checked").length;
				return len1-len2; 
			}
			
			var total = function(){
				var check = $(".table-responsive tbody tr input[type=checkbox]:checked");
				var a = 0;
				for(var i=0;i<check.length;i++){
					a+=parseInt(check.eq(i).parent().siblings("td:nth-child(5)").find("span").text());
				}
				console.log(a)
				$(".dibu p i").text(a.toFixed(2));
			}
			
			$(".all_check").siblings("i").click(function(){
				if($(this).siblings("input").is(":checked")){
					$(this).siblings("input").removeAttr("checked")
					$(this).removeClass("on")
					$(".table-responsive tbody tr input[type=checkbox]").removeAttr("checked")
					$(".table-responsive tbody tr td:nth-child(1) i").removeClass("on")
					total();
					num_total();
				}else{
					$(this).addClass("on")
					$(this).siblings("input").prop("checked","checked");
					
					$(".table-responsive tbody tr input[type=checkbox]").prop("checked","checked");
					$(".table-responsive tbody tr td:nth-child(1) i").addClass("on")
					total();
					num_total();
					
				}
				
			})
			
/**改变输入框的值***/
					var focusVal,
					reg = /.*\..*/

					$('.prd_num').focus(function() {
						focusVal = $(this).val()
					})
				$(".prd_num").change(function(){
						numA = $(this).val()
						if(!Number(numA) || reg.test(numA)) {
							$(this).val(focusVal)
							numA = focusVal

						} else if(numA >= 100) {
							numA = 99
							$(this).val(numA)
						}															
						$(this).val(numA);
						total();
						var td3V = parseInt($(this).parent().siblings().find(".cont span").text());
				$(this).parent().siblings("td:nth-child(5)").find("span").text((td3V*numA).toFixed(2))
				})
          	
//			单选 siblings是兄弟姐妹
          $(".table-responsive tbody tr td:nth-child(1) i").click(function(){
          	   if($(this).siblings("input").is(":checked")){
          	   	  $(this).siblings("input").removeAttr("checked");
          	   	  $(this).removeClass("on")
          	   }else{
          	    $(this).siblings("input").prop("checked","checked");
          	    $(this).addClass("on")
          	   }
          	   if(!cont()){
					$(".all_check").prop("checked","checked");
					$(".all_check").siblings("i").addClass("on")
				}else{
					$(".all_check").removeAttr("checked");
					$(".all_check").siblings("i").removeClass("on")
				}
				total();
				num_total();
          })
			
			
			$(".prd_addNum").click(function(){
				
				var num = parseInt($(this).siblings(".prd_num").val());
				++num;
				if(num>99){
					num=99;
				}
				
				var td3V = parseInt($(this).parent().siblings().find(".cont span").text());
				$(this).parent().siblings("td:nth-child(5)").find("span").text((td3V*num).toFixed(2))
				console.log(td3V*num)
				/*这是将当前的值赋值到最初*/
				$(this).siblings(".prd_num").val(num);
				total();
			})
			
			$(".prd_subNum").click(function(){
				var num = parseInt($(this).siblings(".prd_num").val());
				--num;
				if(num<1){
					num=1;
				}
				console.log(num)
				var td3V = parseInt($(this).parent().siblings().find(".cont span").text());
				$(this).parent().siblings("td:nth-child(5)").find("span").text((td3V*num).toFixed(2))
				
				$(this).siblings(".prd_num").val(num);
				total();
			})
			
			
			$(".table-responsive tbody tr  td:last-child img").click(function(){
				var bool = confirm("确定删除吗？");
				if(bool){
					$(this).parents("tr").remove();
				}
				total();
				num_total();
			})
			
			total();
		})
	</script>
	
	
<div class="footer">
	<p>COPYRIGHT (C) 2016WWW.JINLIAN.COM ALL RIGHTS RSERVED</p>
</div>
	</body>
</html>
